define("local_evokegame/notificationbadge",["jquery","core/ajax","core/config","local_evokegame/sweetalert","local_evokegame/modal_notificationbadge"],(function($,Ajax,Config,Swal,ModalNotificationBadge){var NotificationBadge=function(){this.checkIfHasNotification()};return NotificationBadge.prototype.checkIfHasNotification=function(){Ajax.call([{methodname:"local_evokegame_checknotificationbadge",args:{}}])[0].done(function(result){if(1==result.status){var uniqid="evokegame-badge-notification-"+Math.random().toString(36).substr(2,9);ModalNotificationBadge.create({templateContext:{uniqid:uniqid,isachievement:result.isachievement||!1,badgename:result.badgename||"Badge",badgeimage:result.badgeimage||"",courseid:result.courseid||0,profileurl:Config.wwwroot+"/local/evokegame/profile.php?id="+(result.courseid||0),title:result.title||(result.isachievement?"You've earned an achievement!":"You've earned a badge!"),description:result.description||"",buttontext:result.buttontext||"Check your scoreboard",closetext:result.closetext||"Close",classes:"evoke-game-badge-modal",headerclasses:"",footer:""},large:!0,removeOnClose:!0,show:!0}).catch(function(error){this.showToast("error","Failed to display badge notification")}.bind(this))}}.bind(this)).fail(function(error){var message=error.message;message||(message=error.error),this.showToast("error",message)}.bind(this))},NotificationBadge.prototype.showToast=function(type,message){Swal.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:8e3,timerProgressBar:!0,onOpen:toast=>{toast.addEventListener("mouseenter",Swal.stopTimer),toast.addEventListener("mouseleave",Swal.resumeTimer)}}).fire({icon:type,title:message})},{init:function(){return new NotificationBadge}}}));

//# sourceMappingURL=notificationbadge.min.js.map