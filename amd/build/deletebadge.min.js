define("local_evokegame/deletebadge",["jquery","core/ajax","core/str","local_evokegame/sweetalert"],(function($,Ajax,Str,Swal){var STRINGS={CONFIRM_TITLE:"Are you sure?",CONFIRM_MSG:"Once deleted, the item cannot be recovered!",CONFIRM_YES:"Yes, delete it!",CONFIRM_NO:"Cancel",SUCCESS:"Chapter successfully deleted."},componentStrings=[{key:"deleteitem_confirm_title",component:"local_evokegame"},{key:"deleteitem_confirm_msg",component:"local_evokegame"},{key:"deleteitem_confirm_yes",component:"local_evokegame"},{key:"deleteitem_confirm_no",component:"local_evokegame"},{key:"deletebadge_success",component:"local_evokegame"}],DeleteBadge=function(){this.getStrings(),this.registerEventListeners()};return DeleteBadge.prototype.getStrings=function(){var stringsPromise=Str.get_strings(componentStrings);$.when(stringsPromise).done((function(strings){STRINGS.CONFIRM_TITLE=strings[0],STRINGS.CONFIRM_MSG=strings[1],STRINGS.CONFIRM_YES=strings[2],STRINGS.CONFIRM_NO=strings[3],STRINGS.SUCCESS=strings[4]}))},DeleteBadge.prototype.registerEventListeners=function(){$("body").on("click",".delete-evokegame-badge",function(event){event.preventDefault();var eventTarget=$(event.currentTarget);Swal.fire({title:STRINGS.CONFIRM_TITLE,text:STRINGS.CONFIRM_MSG,icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:STRINGS.CONFIRM_YES,cancelButtonText:STRINGS.CONFIRM_NO}).then(function(result){result.value&&this.deleteItemRow(eventTarget)}.bind(this))}.bind(this))},DeleteBadge.prototype.deleteItemRow=function(eventTarget){Ajax.call([{methodname:"local_evokegame_deletebadge",args:{badge:{id:eventTarget.data("id")}}}])[0].done(function(){this.removeChapterLine(eventTarget)}.bind(this)).fail(function(error){var message=error.message;message||(message=error.error),this.showToast("error",message)}.bind(this))},DeleteBadge.prototype.removeChapterLine=function(eventTarget){eventTarget.closest("tr").fadeOut("normal",(function(){$(this).remove()})),this.showToast("success",STRINGS.SUCCESS)},DeleteBadge.prototype.showToast=function(type,message){Swal.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:8e3,timerProgressBar:!0,onOpen:toast=>{toast.addEventListener("mouseenter",Swal.stopTimer),toast.addEventListener("mouseleave",Swal.resumeTimer)}}).fire({icon:type,title:message})},{init:function(){return new DeleteBadge}}}));

//# sourceMappingURL=deletebadge.min.js.map